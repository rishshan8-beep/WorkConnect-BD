/* =======================================================
   ðŸŒ LANGUAGE SWITCHER
   ======================================================= */
const langData = {
  en: {
    home_title: "Connecting Talent with Opportunity",
    home_desc:
      "WorkConnect BD helps bridge the gap between skilled professionals and employers across Bangladesh.",
    about_title: "Who Are You Guys",
    about_text1:
      "We connect skilled Bangladeshi professionals with top employers worldwide through our easy-to-use platform.",
    about_text2:
      "Our mission is to empower job seekers and companies to find their perfect match â€” efficiently and confidently.",
    how_title: "How WorkConnect BD Works",
    how_step1: "Create Your Profile",
    how_step2: "Explore Roles",
    how_step3: "Get Matched",
    how_step4: "Start Working",
    jobs_title: "Explore Job Types That Suit Your Lifestyle",
    apply_title: "Apply Form",
    apply_text:
      "Please fill out the form below to apply for part-time or full-time positions.",
    footer_text: "Â© 2025 WorkConnect BD. All rights reserved.",
  },

  bn: {
    home_title: "à¦ªà§à¦°à¦¤à¦¿à¦­à¦¾ à¦à¦¬à¦‚ à¦¸à§à¦¯à§‹à¦—à§‡à¦° à¦¸à¦‚à¦¯à§‹à¦— à¦¸à§à¦¥à¦¾à¦ªà¦¨",
    home_desc:
      "à¦“à¦¯à¦¼à¦¾à¦°à§à¦•à¦•à¦¨à§‡à¦•à§à¦Ÿ à¦¬à¦¿à¦¡à¦¿ à¦¬à¦¾à¦‚à¦²à¦¾à¦¦à§‡à¦¶à§‡ à¦¦à¦•à§à¦· à¦ªà§‡à¦¶à¦¾à¦œà§€à¦¬à§€ à¦à¦¬à¦‚ à¦¨à¦¿à¦¯à¦¼à§‹à¦—à¦¦à¦¾à¦¤à¦¾à¦¦à§‡à¦° à¦®à¦§à§à¦¯à§‡ à¦¸à§‡à¦¤à§à¦¬à¦¨à§à¦§à¦¨ à¦¤à§ˆà¦°à¦¿ à¦•à¦°à§‡à¥¤",
    about_title: "à¦†à¦®à¦°à¦¾ à¦•à¦¾à¦°à¦¾",
    about_text1:
      "à¦†à¦®à¦°à¦¾ à¦¦à¦•à§à¦· à¦¬à¦¾à¦‚à¦²à¦¾à¦¦à§‡à¦¶à¦¿ à¦ªà§‡à¦¶à¦¾à¦œà§€à¦¬à§€à¦¦à§‡à¦° à¦¬à¦¿à¦¶à§à¦¬à¦¬à§à¦¯à¦¾à¦ªà§€ à¦¶à§€à¦°à§à¦· à¦¨à¦¿à¦¯à¦¼à§‹à¦—à¦¦à¦¾à¦¤à¦¾à¦¦à§‡à¦° à¦¸à¦¾à¦¥à§‡ à¦¯à§à¦•à§à¦¤ à¦•à¦°à¦¿à¥¤",
    about_text2:
      "à¦†à¦®à¦¾à¦¦à§‡à¦° à¦²à¦•à§à¦·à§à¦¯ à¦¹à¦²à§‹ à¦šà¦¾à¦•à¦°à¦¿à¦ªà§à¦°à¦¾à¦°à§à¦¥à§€à¦¦à§‡à¦° à¦à¦¬à¦‚ à¦•à§‹à¦®à§à¦ªà¦¾à¦¨à¦¿à¦—à§à¦²à¦¿à¦•à§‡ à¦¤à¦¾à¦¦à§‡à¦° à¦¸à¦ à¦¿à¦• à¦®à¦¿à¦²à¦Ÿà¦¿ à¦–à§à¦à¦œà§‡ à¦ªà§‡à¦¤à§‡ à¦¸à¦¹à¦¾à¦¯à¦¼à¦¤à¦¾ à¦•à¦°à¦¾ â€” à¦¦à§à¦°à§à¦¤ à¦“ à¦†à¦¤à§à¦®à¦¬à¦¿à¦¶à§à¦¬à¦¾à¦¸à§‡à¦° à¦¸à¦¾à¦¥à§‡à¥¤",
    how_title: "à¦“à¦¯à¦¼à¦¾à¦°à§à¦•à¦•à¦¨à§‡à¦•à§à¦Ÿ à¦¬à¦¿à¦¡à¦¿ à¦•à§€à¦­à¦¾à¦¬à§‡ à¦•à¦¾à¦œ à¦•à¦°à§‡",
    how_step1: "à¦†à¦ªà¦¨à¦¾à¦° à¦ªà§à¦°à§‹à¦«à¦¾à¦‡à¦² à¦¤à§ˆà¦°à¦¿ à¦•à¦°à§à¦¨",
    how_step2: "à¦šà¦¾à¦•à¦°à¦¿ à¦…à¦¨à§à¦¸à¦¨à§à¦§à¦¾à¦¨ à¦•à¦°à§à¦¨",
    how_step3: "à¦®à§à¦¯à¦¾à¦š à¦ªà¦¾à¦¨",
    how_step4: "à¦•à¦¾à¦œ à¦¶à§à¦°à§ à¦•à¦°à§à¦¨",
    jobs_title: "à¦†à¦ªà¦¨à¦¾à¦° à¦œà§€à¦¬à¦¨à¦§à¦¾à¦°à¦¾à¦° à¦¸à¦¾à¦¥à§‡ à¦®à¦¾à¦¨à¦¾à¦¨à¦¸à¦‡ à¦šà¦¾à¦•à¦°à¦¿à¦° à¦§à¦°à¦¨ à¦…à¦¨à§à¦¬à§‡à¦·à¦£ à¦•à¦°à§à¦¨",
    apply_title: "à¦†à¦¬à§‡à¦¦à¦¨ à¦«à¦°à§à¦®",
    apply_text:
      "à¦¦à¦¯à¦¼à¦¾ à¦•à¦°à§‡ à¦ªà¦¾à¦°à§à¦Ÿ-à¦Ÿà¦¾à¦‡à¦® à¦¬à¦¾ à¦«à§à¦²-à¦Ÿà¦¾à¦‡à¦® à¦ªà¦œà¦¿à¦¶à¦¨à§‡à¦° à¦œà¦¨à§à¦¯ à¦†à¦¬à§‡à¦¦à¦¨ à¦•à¦°à¦¤à§‡ à¦¨à¦¿à¦šà§‡à¦° à¦«à¦°à§à¦®à¦Ÿà¦¿ à¦ªà§‚à¦°à¦£ à¦•à¦°à§à¦¨à¥¤",
    footer_text: "Â© à§¨à§¦à§¨à§« à¦“à¦¯à¦¼à¦¾à¦°à§à¦•à¦•à¦¨à§‡à¦•à§à¦Ÿ à¦¬à¦¿à¦¡à¦¿à¥¤ à¦¸à¦°à§à¦¬à¦¸à§à¦¬à¦¤à§à¦¬ à¦¸à¦‚à¦°à¦•à§à¦·à¦¿à¦¤à¥¤",
  },
};

// === Set Language ===
function setLanguage(lang) {
  localStorage.setItem("selectedLang", lang);
  document.getElementById("currentLang").innerText = lang === "en" ? "EN" : "BN";

  const t = langData[lang];

  // Update text dynamically across sections
  if (document.querySelector("#home h1")) document.querySelector("#home h1").textContent = t.home_title;
  if (document.querySelector("#home p")) document.querySelector("#home p").textContent = t.home_desc;
  if (document.querySelector("#about .section-title")) document.querySelector("#about .section-title").textContent = t.about_title;

  const aboutP = document.querySelectorAll("#about p");
  if (aboutP.length >= 2) {
    aboutP[0].textContent = t.about_text1;
    aboutP[1].textContent = t.about_text2;
  }

  if (document.querySelector("#how h2")) document.querySelector("#how h2").textContent = t.how_title;

  const steps = document.querySelectorAll("#how .flow-card h4");
  if (steps.length === 4) {
    steps[0].textContent = t.how_step1;
    steps[1].textContent = t.how_step2;
    steps[2].textContent = t.how_step3;
    steps[3].textContent = t.how_step4;
  }

  if (document.querySelector("#jobs h2")) document.querySelector("#jobs h2").textContent = t.jobs_title;
  if (document.querySelector("#apply h3")) document.querySelector("#apply h3").textContent = t.apply_title;
  if (document.querySelector("#apply p")) document.querySelector("#apply p").textContent = t.apply_text;
  if (document.querySelector("footer p")) document.querySelector("footer p").textContent = t.footer_text;

  // Highlight active dropdown item
  document.querySelectorAll(".lang-option").forEach(el => el.classList.remove("active"));
  document.querySelector(`.lang-option[data-lang='${lang}']`).classList.add("active");
}

// === Language dropdown handling ===
document.querySelectorAll(".lang-option").forEach(option => {
  option.addEventListener("click", e => {
    e.preventDefault();
    const lang = e.target.getAttribute("data-lang");
    setLanguage(lang);
  });
});

// === Load saved preference ===
const savedLang = localStorage.getItem("selectedLang") || "en";
setLanguage(savedLang);


/* =======================================================
   ðŸ§­ NAVBAR SCROLL + ACTIVE LINK DETECTION
   ======================================================= */
const sections = document.querySelectorAll("section[id]");
const navLinks = document.querySelectorAll(".navbar .nav-link");
const navbar = document.querySelector(".navbar");

// Smooth scroll for nav links
navLinks.forEach(link => {
  link.addEventListener("click", e => {
    if (link.hash) {
      e.preventDefault();
      const target = document.querySelector(link.hash);
      const offset = navbar.offsetHeight - 10;
      window.scrollTo({
        top: target.offsetTop - offset,
        behavior: "smooth",
      });
    }
  });
});

// Scroll event â€” highlight current nav link
window.addEventListener("scroll", () => {
  const scrollY = window.pageYOffset;
  const offset = navbar.offsetHeight + 120;
  let currentSection = "";

  sections.forEach(sec => {
    const top = sec.offsetTop - offset;
    const bottom = top + sec.offsetHeight;
    if (scrollY >= top && scrollY < bottom) currentSection = sec.getAttribute("id");
  });

  navLinks.forEach(link => {
    link.classList.remove("active");
    if (link.getAttribute("href") === "#" + currentSection) link.classList.add("active");
  });

  // Navbar background on scroll
  if (scrollY > 80) navbar.classList.add("scrolled");
  else navbar.classList.remove("scrolled");
});


/* =======================================================
   ðŸ’¼ APPLY NOW BUTTON â€” MODAL SCROLL FIX
   ======================================================= */
document.querySelectorAll(".apply-now-btn").forEach(btn => {
  btn.addEventListener("click", e => {
    e.preventDefault();
    const target = document.querySelector(btn.getAttribute("href"));
    const modal = bootstrap.Modal.getInstance(document.querySelector("#jobCategoryModal"));

    if (modal) {
      modal.hide();
      // Wait until modal closes before smooth scrolling
      const observer = new MutationObserver(() => {
        if (!document.querySelector(".modal.show")) {
          observer.disconnect();
          if (target) {
            const offset = target.offsetTop - 70;
            window.scrollTo({
              top: offset,
              behavior: "smooth",
            });
          }
        }
      });
      observer.observe(document.body, { attributes: true, subtree: true });
    }
  });
});
